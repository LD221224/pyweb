{% extends 'base.html' %}
{% block title %}
    Welcome PyWeb!!
{% endblock %}

{% block content %}
{% load static %}
<div class="container my-3">
    <!-- 배경 사진 전환 - 부트스트랩 Carousel 사용 -->
    <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="{% static 'board/images/bg0.jpg' %}" class="d-block w-100" alt="배경사진1">
            </div>
            <div class="carousel-item">
                <img src="{% static 'board/images/bg1.jpg' %}" class="d-block w-100" alt="배경사진2">
            </div>
            <div class="carousel-item">
                <img src="{% static 'board/images/bg2.jpg' %}" class="d-block w-100" alt="배경사진3">
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
    <div class="row">
        <!-- 배경 사진 전환 - 자바스크립트 작성
        <div class="card mb-4">
            <img id="pic" src="{% static 'board/images/bg0.jpg' %}" alt="배경">
        </div>
        -->
        <div class="col-6 p-5">
            <h3 class="mt-4">무엇이든 물어보세요</h3>
            <div class="card my-3">
                <div class="card-body">
                    <p>질문/답변 게시판을 사용해 보세요</p>
                    <p>댓글과 추천 기능을 사용해 보세요</p>
                    <a class="btn btn-info" href="{% url 'board:boardlist' %}">질문/답변 &rarr;</a>
                </div>
            </div>
            <h3 class="mt-4">설문 투표</h3>
            <div class="card">
                <div class="card-body">
                    <p>설문에 투표해 보세요</p>
                    <a class="btn btn-danger" href="{% url 'polls:index' %}">투표 하기 &rarr;</a>
                </div>
            </div>
        </div>
        <div class="col-6 p-5">
            <h3 class="mt-4">Question - 최근 질문</h3>
            {% for question in question_list %}
            <div class="card my-3">
                <div class="card-body p-2">
                    <p>
                        <a href="{% url 'board:detail' question.id %}"
                           class="text-dark text-decoration-none">
                            {{ question.subject }}
                        </a>
                    </p>
                    <div class="card-text text-right">
                        <span class="badge text-dark">
                            {{ question.author }}&nbsp; &nbsp;{{ question.create_date }}
                        </span>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    <!--
    <div class="jumbotron py-5">
        <h1 class="display-4 text-primary font-weight-bold">Welcome PyWeb!!</h1>
        <hr class="my-4">
        <p>안녕하세요. Pyweb 사이트 입니다. 이 사이트는 <span class="text-success">질문/답변</span>, <span class="text-danger">설문조사</span> 게시판으로 구성되어있습니다.</p>
        <a class="btn btn-outline-success mr-3" href="{% url 'board:boardlist' %}" role="button">질문/답변</a>
        <a class="btn btn-outline-danger" href="{% url 'polls:index' %}" role="button">설문조사</a>
    </div>
    <div id="carouselExampleCaptions" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
            <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
            <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>
        </ol>
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="{% static 'board/images/question.jpg' %}" class="d-block w-100" alt="question">
        </div>
        <div class="carousel-item">
            <img src="{% static 'board/images/poll.jpg' %}" class="d-block w-100" alt="poll">
        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-target="#carouselExampleCaptions" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-target="#carouselExampleCaptions" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </button>
    </div>
    -->
</div>
{% endblock %}

{% block script %}
<script>
    let picture = ["/static/board/images/bg0.jpg", "/static/board/images/bg1.jpg", "/static/board/images/bg2.jpg"];
    let pic_idx = 0;

    showPicture();  // 함수 호출

    function showPicture(){
        let img = document.getElementById("pic");
        img.src = picture[pic_idx];  // 0번 인덱스 이미지 저장
        pic_idx += 1;  // 1 증가

        if(pic_idx == 3){
            pic_idx = 0;
        }

        setTimeout(showPicture, 2000);  // 2초 설정(롤백 함수)
    };
</script>
{% endblock %}